[debug] [2024-11-28T10:12:16.162Z] ----------------------------------------------------------------------
[debug] [2024-11-28T10:12:16.166Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\gaberscekl\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions --debug
[debug] [2024-11-28T10:12:16.167Z] CLI Version:   13.27.0
[debug] [2024-11-28T10:12:16.167Z] Platform:      win32
[debug] [2024-11-28T10:12:16.167Z] Node Version:  v22.11.0
[debug] [2024-11-28T10:12:16.167Z] Time:          Thu Nov 28 2024 11:12:16 GMT+0100 (Srednjeevropski standardni čas)
[debug] [2024-11-28T10:12:16.167Z] ----------------------------------------------------------------------
[debug] 
[debug] [2024-11-28T10:12:16.173Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2024-11-28T10:12:16.310Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-28T10:12:16.311Z] > authorizing via signed-in user (lukagaberscek3@gmail.com)
[debug] [2024-11-28T10:12:16.311Z] [iam] checking project studentski-dogodki for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2024-11-28T10:12:16.314Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:16.314Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:16.315Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions [none]
[debug] [2024-11-28T10:12:16.316Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:16.316Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-11-28T10:12:17.420Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions 200
[debug] [2024-11-28T10:12:17.421Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2024-11-28T10:12:17.423Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:17.423Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:17.424Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/studentski-dogodki/serviceAccounts/studentski-dogodki@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2024-11-28T10:12:17.424Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/studentski-dogodki/serviceAccounts/studentski-dogodki@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2024-11-28T10:12:18.467Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/studentski-dogodki/serviceAccounts/studentski-dogodki@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2024-11-28T10:12:18.468Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/studentski-dogodki/serviceAccounts/studentski-dogodki@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'studentski-dogodki'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run lint
[info] +  functions: Finished running predeploy script. 
[debug] [2024-11-28T10:12:26.983Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:26.984Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:26.984Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki [none]
[debug] [2024-11-28T10:12:28.082Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki 200
[debug] [2024-11-28T10:12:28.082Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki {"projectNumber":"835239593044","projectId":"studentski-dogodki","lifecycleState":"ACTIVE","name":"Studentski Dogodki","labels":{"firebase":"enabled"},"createTime":"2024-10-08T19:20:12.703573Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2024-11-28T10:12:28.084Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.084Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.085Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.085Z] Checked if tokens are valid: true, expires at: 1732790486804
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2024-11-28T10:12:28.086Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.086Z] Checked if tokens are valid: true, expires at: 1732790486804
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2024-11-28T10:12:28.087Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.087Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:28.088Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudfunctions.googleapis.com [none]
[debug] [2024-11-28T10:12:28.088Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:28.090Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/runtimeconfig.googleapis.com [none]
[debug] [2024-11-28T10:12:28.090Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:28.094Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudbuild.googleapis.com [none]
[debug] [2024-11-28T10:12:28.095Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudbuild.googleapis.com x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:28.097Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/artifactregistry.googleapis.com [none]
[debug] [2024-11-28T10:12:28.098Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/artifactregistry.googleapis.com x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:29.301Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudfunctions.googleapis.com 200
[debug] [2024-11-28T10:12:29.302Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2024-11-28T10:12:29.308Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/runtimeconfig.googleapis.com 200
[debug] [2024-11-28T10:12:29.308Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/runtimeconfig.googleapis.com [omitted]
[debug] [2024-11-28T10:12:29.322Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/artifactregistry.googleapis.com 200
[debug] [2024-11-28T10:12:29.322Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2024-11-28T10:12:29.338Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudbuild.googleapis.com 200
[debug] [2024-11-28T10:12:29.339Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2024-11-28T10:12:29.340Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:29.341Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:29.342Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/studentski-dogodki/adminSdkConfig [none]
[debug] [2024-11-28T10:12:30.318Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/studentski-dogodki/adminSdkConfig 200
[debug] [2024-11-28T10:12:30.319Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/studentski-dogodki/adminSdkConfig {"projectId":"studentski-dogodki","storageBucket":"studentski-dogodki.firebasestorage.app"}
[debug] [2024-11-28T10:12:30.321Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:30.322Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:30.323Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs [none]
[debug] [2024-11-28T10:12:30.893Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs 200
[debug] [2024-11-28T10:12:30.894Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs {"configs":[{"name":"projects/studentski-dogodki/configs/stripe"}]}
[debug] [2024-11-28T10:12:30.894Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:30.895Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:30.895Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables [none]
[debug] [2024-11-28T10:12:31.118Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables 200
[debug] [2024-11-28T10:12:31.119Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables {"variables":[{"name":"projects/studentski-dogodki/configs/stripe/variables/secret","updateTime":"2024-11-24T15:25:17.095841955Z"}]}
[debug] [2024-11-28T10:12:31.121Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:31.122Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:31.123Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables/secret [none]
[debug] [2024-11-28T10:12:31.327Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables/secret 200
[debug] [2024-11-28T10:12:31.328Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/studentski-dogodki/configs/stripe/variables/secret {"name":"projects/studentski-dogodki/configs/stripe/variables/secret","updateTime":"2024-11-24T15:25:17.095841955Z","text":"sk_test_51Nbp2BJHLDPnt1PVLLW3s3dA7PRLv8AAs5ucAcWrstgbvP7K8qEY4RclqMVubCOxJt67LXhF2g70SS6MG56ChXKY00fzroQQUg"}
[debug] [2024-11-28T10:12:31.332Z] Validating nodejs source
[debug] [2024-11-28T10:12:33.708Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "lint": "eslint . --ext .js --fix",
    "serve": "firebase emulators:start --only functions",
    "shell": "firebase functions:shell",
    "start": "npm run shell",
    "deploy": "firebase deploy --only functions",
    "logs": "firebase functions:log"
  },
  "engines": {
    "node": "18"
  },
  "main": "index.js",
  "dependencies": {
    "firebase-admin": "^13.0.1",
    "firebase-functions": "^6.1.1",
    "stripe": "^17.4.0"
  },
  "devDependencies": {
    "@babel/plugin-proposal-private-property-in-object": "^7.21.11",
    "eslint": "^8.15.0",
    "eslint-config-google": "^0.14.0",
    "firebase-functions-test": "^3.1.0"
  },
  "private": true
}
[debug] [2024-11-28T10:12:33.711Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2024-11-28T10:12:33.713Z] Could not find functions.yaml. Must use http discovery
[debug] [2024-11-28T10:12:33.727Z] Found firebase-functions binary at 'C:\Users\gaberscekl\Desktop\Sdg spletna\website\functions\node_modules\.bin\firebase-functions'
[info] Serving at port 8185

[debug] [2024-11-28T10:12:35.278Z] *** [apiv2] error from fetch(https://firebase-public.firebaseio.com/cli.json, {"headers":{},"method":"GET"}): FetchError: request to https://firebase-public.firebaseio.com/cli.json failed, reason: read ECONNRESET
[warn] !  Unable to fetch the CLI MOTD and remote config. This is not a fatal error, but may indicate an issue with your network connection. 
[debug] [2024-11-28T10:12:35.279Z] Failed to fetch MOTD FirebaseError: Failed to make request to https://firebase-public.firebaseio.com/cli.json
[error] (node:8400) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2024-11-28T10:12:35.945Z] Got response from /__/functions.yaml {"endpoints":{"createCheckoutSession":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"createCheckoutSession"}},"specVersion":"v1alpha1","requiredAPIs":[],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2024-11-28T10:12:40.015Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:40.016Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:40.016Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/firebaseextensions.googleapis.com [none]
[debug] [2024-11-28T10:12:40.017Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:41.579Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/firebaseextensions.googleapis.com 200
[debug] [2024-11-28T10:12:41.580Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/studentski-dogodki/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2024-11-28T10:12:41.582Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2024-11-28T10:12:41.583Z] > authorizing via signed-in user (lukagaberscek3@gmail.com)
[debug] [2024-11-28T10:12:41.584Z] [iam] checking project studentski-dogodki for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2024-11-28T10:12:41.585Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:41.586Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:41.587Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions [none]
[debug] [2024-11-28T10:12:41.588Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions x-goog-quota-user=projects/studentski-dogodki
[debug] [2024-11-28T10:12:41.589Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-11-28T10:12:42.665Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions 200
[debug] [2024-11-28T10:12:42.666Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/studentski-dogodki:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2024-11-28T10:12:42.668Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:42.669Z] Checked if tokens are valid: true, expires at: 1732790486804
[debug] [2024-11-28T10:12:42.670Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/studentski-dogodki/instances pageSize=100&pageToken=
[debug] [2024-11-28T10:12:42.758Z] *** [apiv2] error from fetch(https://firebaseextensions.googleapis.com/v1beta/projects/studentski-dogodki/instances?pageSize=100&pageToken=, {"headers":{},"method":"GET"}): FetchError: request to https://firebaseextensions.googleapis.com/v1beta/projects/studentski-dogodki/instances?pageSize=100&pageToken= failed, reason: read ECONNRESET
[debug] [2024-11-28T10:12:43.175Z] FetchError: request to https://firebaseextensions.googleapis.com/v1beta/projects/studentski-dogodki/instances?pageSize=100&pageToken= failed, reason: read ECONNRESET
    at ClientRequest.<anonymous> (C:\Users\gaberscekl\AppData\Roaming\npm\node_modules\firebase-tools\node_modules\node-fetch\lib\index.js:1501:11)
    at ClientRequest.emit (node:events:518:28)
    at ClientRequest.emit (node:domain:489:12)
    at emitErrorEvent (node:_http_client:103:11)
    at TLSSocket.socketErrorListener (node:_http_client:506:5)
    at TLSSocket.emit (node:events:518:28)
    at TLSSocket.emit (node:domain:489:12)
    at emitErrorNT (node:internal/streams/destroy:170:8)
    at emitErrorCloseNT (node:internal/streams/destroy:129:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)
[error] 
[error] Error: Failed to make request to https://firebaseextensions.googleapis.com/v1beta/projects/studentski-dogodki/instances?pageSize=100&pageToken=
